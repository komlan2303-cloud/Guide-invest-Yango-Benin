<!DOCTYPE html>
<html lang="">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Yango Investment Simulator</title>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

<style>
body{margin:0;font-family:Arial,sans-serif;background:#f5f6f8}
.wrapper{max-width:1200px;margin:auto;padding:20px}
.card{background:#fff;border-radius:14px;padding:20px;margin-bottom:24px}
.app-title{text-align:center;font-size:26px;font-weight:bold}
.app-desc{text-align:center;color:#555;margin-top:8px;font-size:14px}
label{font-weight:bold;display:block;margin-top:14px}
input,select,button{
  width:100%;padding:12px;border-radius:10px;
  border:1px solid #ccc;font-size:15px
}
button{background:#FFD400;border:none;font-weight:bold;cursor:pointer;margin-top:18px}
.nav button{margin-bottom:10px}
.hidden{display:none}
.result{background:#fff8db;padding:18px;border-radius:12px;margin-top:18px}
footer{text-align:center;font-size:13px;color:#555;margin-top:40px}
</style>
</head>

<body>
<div class="wrapper">

<div class="card app-title">
  <span data-i18n="app_name"></span>
  <div class="app-desc" data-i18n="app_desc"></div>
</div>

<div class="card">
  <b data-i18n="important"></b>
</div>

<div class="card">
  <label data-i18n="language"></label>
  <select id="lang"></select>

  <label data-i18n="currency"></label>
  <select id="currency">
    <option value="USD">USD</option>
    <option value="XOF">XOF</option>
    <option value="XAF">XAF</option>
    <option value="EUR">EUR</option>
    <option value="GBP">GBP</option>
    <option value="GHS">GHS</option>
    <option value="NGN">NGN</option>
    <option value="AED">AED</option>
    <option value="CNY">CNY</option>
    <option value="ZAR">ZAR</option>
    <option value="KES">KES</option>
    <option value="MAD">MAD</option>
  </select>
</div>

<div class="card nav">
  <button onclick="show('salariat')" data-i18n="menu_salariat"></button>
  <button onclick="show('leasing')" data-i18n="menu_leasing"></button>
  <button onclick="show('compare')" data-i18n="menu_compare"></button>
</div>

<!-- SALARIAT -->
<div class="card hidden" id="salariat">
<h3 data-i18n="salariat"></h3>

<label data-i18n="vehicles"></label>
<input id="s_cars" data-ph="vehicles_ph">

<label data-i18n="purchase"></label>
<input id="s_buy" data-ph="purchase_ph">

<label data-i18n="revenue"></label>
<input id="s_rev" data-ph="revenue_ph">

<label data-i18n="salary"></label>
<input id="s_salary" data-ph="salary_ph">

<label data-i18n="fuel_mode"></label>
<select id="fuel_mode" onchange="toggleFuel()">
  <option value="simple" data-i18n="fuel_simple"></option>
  <option value="estimate" data-i18n="fuel_estimate"></option>
</select>

<div id="fuel_simple">
  <label data-i18n="fuel"></label>
  <input id="s_fuel" data-ph="fuel_ph">
</div>

<div id="fuel_estimate" class="hidden">
  <label data-i18n="fuel_price"></label>
  <input id="fuel_price" data-ph="fuel_price_ph">

  <label data-i18n="consumption"></label>
  <input id="consumption" data-ph="consumption_ph">

  <label data-i18n="price_km"></label>
  <input id="price_km" data-ph="price_km_ph">
</div>

<label data-i18n="maintenance"></label>
<input id="s_maint" data-ph="maintenance_ph">

<button onclick="simulateSalariat()" data-i18n="simulate"></button>
<div class="result hidden" id="resSal"></div>
</div>

<!-- LEASING -->
<div class="card hidden" id="leasing">
<h3 data-i18n="leasing"></h3>

<label data-i18n="vehicles"></label>
<input id="l_cars" data-ph="vehicles_ph">

<label data-i18n="purchase"></label>
<input id="l_buy" data-ph="purchase_ph">

<label data-i18n="sale_price"></label>
<input id="l_sell" data-ph="sale_ph">

<label data-i18n="days"></label>
<input id="l_days" data-ph="days_ph">

<button onclick="simulateLeasing()" data-i18n="simulate"></button>
<div class="result hidden" id="resLease"></div>
</div>

<!-- COMPARISON -->
<div class="card hidden" id="compare">
<h3 data-i18n="comparison"></h3>
<div class="result" id="resCompare"></div>
<button onclick="downloadPDF()" data-i18n="download_pdf"></button>
</div>

<footer>© 2026 – Josué Cédric Komlan Akakpovi</footer>
</div>

<script>
function salariatSynthesis(profit, cars, salary, revenue){
  const roiMonths = profit > 0 ? Math.round((s_buy.value * cars) / profit) : "∞";
  const driverViable = revenue - salary > 0;

  return `
  <b>${i18n[lang].profit}</b> : ${fromUSD(profit)} / mois<br><br>

  <b>ROI :</b> ${roiMonths} ${i18n[lang].months}<br><br>

  <b>${driverViable ? "✅ Chauffeur viable" : "❌ Chauffeur en difficulté"}</b><br>
  ${driverViable 
    ? "Le chauffeur peut couvrir ses charges et vivre correctement."
    : "Le revenu est insuffisant pour le chauffeur."}
  <br><br>

  <b>Avantages :</b>
  <ul>
    <li>Contrôle total du véhicule</li>
    <li>Revenus mensuels stables</li>
  </ul>

  <b>Inconvénients :</b>
  <ul>
    <li>Gestion chauffeur</li>
    <li>Charges fixes élevées</li>
  </ul>
  `;
}
function leasingSynthesis(daily, days){
  const roiDays = Math.round(l_buy.value / daily);
  const driverDailyCapacity = daily < (s_rev.value || 50);

  return `
  <b>${fromUSD(daily)}</b> / ${lang === "fr" ? "jour" : "day"}<br><br>

  <b>ROI :</b> ${roiDays} ${lang === "fr" ? "jours" : "days"}<br><br>

  <b>${driverDailyCapacity ? "✅ Paiement soutenable" : "❌ Paiement risqué"}</b><br>
  ${driverDailyCapacity
    ? "Le chauffeur peut payer sans pression excessive."
    : "Le montant journalier est trop élevé pour un chauffeur moyen."}
  <br><br>

  <b>Avantages :</b>
  <ul>
    <li>Pas de gestion salariale</li>
    <li>Cash-flow quotidien</li>
  </ul>

  <b>Inconvénients :</b>
  <ul>
    <li>Risque d’abandon chauffeur</li>
    <li>Usure accélérée du véhicule</li>
  </ul>
  `;
}  
  
const BASE={km:8000};
const rates={USD:1,XOF:1/600,XAF:1/600,EUR:1/1.08,GBP:1/1.27,GHS:1/12,NGN:1/1600,AED:1/3.67,CNY:1/7.2,ZAR:1/19,KES:1/155,MAD:1/10};

const i18n={
fr:{
app_name:"Simulateur d’Investissement Yango",
app_desc:"Outil professionnel de simulation d’investissement dans le VTC avec Yango. Les calculs sont basés sur des données terrain collectées auprès de chauffeurs actifs.",
important:"Estimations basées sur des données terrain Yango",
language:"Langue",currency:"Devise",
menu_salariat:"Salariat",menu_leasing:"Leasing",menu_compare:"Comparaison",
salariat:"Simulation Salariat",leasing:"Simulation Leasing",
vehicles:"Nombre de véhicules",
purchase:"Prix d’achat par véhicule",
revenue:"Revenu mensuel par véhicule",
salary:"Salaire chauffeur",
fuel_mode:"Mode carburant",
fuel_simple:"Saisie directe",
fuel_estimate:"Estimation intelligente",
fuel:"Carburant mensuel",
fuel_price:"Prix carburant à la pompe",
consumption:"Consommation (L/100 km)",
price_km:"Prix par km Yango",
maintenance:"Entretien & divers",
sale_price:"Total payé par chauffeur",
days:"Durée (jours)",
simulate:"Simuler",
profit:"Profit mensuel",
comparison:"Comparaison Salariat vs Leasing",
download_pdf:"Télécharger le rapport PDF",

vehicles_ph:"Ex : 5 véhicules",
purchase_ph:"Ex : 5 000 par véhicule",
revenue_ph:"Ex : 1 400 par véhicule",
salary_ph:"Ex : 140 par mois",
fuel_ph:"Ex : 300 par mois",
fuel_price_ph:"Ex : 1.2 par litre",
consumption_ph:"Ex : 8 L / 100 km",
price_km_ph:"Ex : 0.35 par km",
maintenance_ph:"Ex : 170 par mois",
sale_ph:"Ex : 7 500",
days_ph:"Ex : 540"
},
en:{
app_name:"Yango Investment Simulator",
app_desc:"Professional investment simulation tool for ride-hailing with Yango. Calculations are based on real field data collected from active drivers.",
important:"Estimates based on Yango field data",
language:"Language",currency:"Currency",
menu_salariat:"Salary",menu_leasing:"Leasing",menu_compare:"Comparison",
salariat:"Salary simulation",leasing:"Leasing simulation",
vehicles:"Number of vehicles",
purchase:"Purchase price per vehicle",
revenue:"Monthly revenue per vehicle",
salary:"Driver salary",
fuel_mode:"Fuel mode",
fuel_simple:"Manual input",
fuel_estimate:"Smart estimation",
fuel:"Monthly fuel",
fuel_price:"Fuel price",
consumption:"Consumption (L/100 km)",
price_km:"Price per km",
maintenance:"Maintenance & others",
sale_price:"Total paid by driver",
days:"Duration (days)",
simulate:"Simulate",
profit:"Monthly profit",
comparison:"Salary vs Leasing comparison",
download_pdf:"Download PDF report",

vehicles_ph:"e.g. 5 vehicles",
purchase_ph:"e.g. 5,000 per vehicle",
revenue_ph:"e.g. 1,400 per vehicle",
salary_ph:"e.g. 140 per month",
fuel_ph:"e.g. 300 per month",
fuel_price_ph:"e.g. 1.2 per liter",
consumption_ph:"e.g. 8 L / 100 km",
price_km_ph:"e.g. 0.35 per km",
maintenance_ph:"e.g. 170 per month",
sale_ph:"e.g. 7,500",
days_ph:"e.g. 540"
}
};

let lang=navigator.language.slice(0,2);
if(!i18n[lang]) lang="en";
let currency="USD";

const langSelect=document.getElementById("lang");
Object.keys(i18n).forEach(l=>langSelect.innerHTML+=`<option value="${l}">${l.toUpperCase()}</option>`);
langSelect.value=lang;
langSelect.onchange=()=>{lang=langSelect.value;applyLang()};
currency.onchange=()=>currency=currency.value;

function applyLang(){
  document.querySelectorAll("[data-i18n]").forEach(e=>e.innerText=i18n[lang][e.dataset.i18n]);
  document.querySelectorAll("[data-ph]").forEach(e=>e.placeholder=i18n[lang][e.dataset.ph]);
}
applyLang();

function toUSD(v){return v*rates[currency]}
function fromUSD(v){
  return new Intl.NumberFormat(
    currency === "XOF" || currency === "XAF" ? "fr-FR" : undefined,
    {
      style:"currency",
      currency,
      maximumFractionDigits:0
    }
  ).format(v / rates[currency]);
}
function show(id){["salariat","leasing","compare"].forEach(x=>document.getElementById(x).classList.add("hidden"));document.getElementById(id).classList.remove("hidden")}
function toggleFuel(){fuel_simple.classList.toggle("hidden",fuel_mode.value==="estimate");fuel_estimate.classList.toggle("hidden",fuel_mode.value==="simple")}

let salProfit=0, leaseDaily=0;

function simulateSalariat(){
  const cars=+s_cars.value;
  let fuelCost=+s_fuel.value||0;
  if(fuel_mode.value==="estimate"){
    fuelCost=(BASE.km/100)*(+consumption.value||8)*(+fuel_price.value||1);
  }
  const profit=(+s_rev.value*cars)-((+s_salary.value+fuelCost+(+s_maint.value||0))*cars);
  salProfit=profit;
  resSal.innerHTML = salariatSynthesis(profit, cars, s_salary.value, s_rev.value);
;
  resSal.classList.remove("hidden");
}

function simulateLeasing(){
  leaseDaily=(+l_sell.value)/(+l_days.value);
  resLease.innerHTML = leasingSynthesis(leaseDaily, l_days.value);
;
  resLease.classList.remove("hidden");
}

function downloadPDF(){
  const {jsPDF}=window.jspdf;
  const pdf=new jsPDF();
  pdf.text(i18n[lang].comparison,10,10);
  pdf.text("Salariat: "+fromUSD(salProfit),10,20);
  pdf.text("Leasing daily: "+fromUSD(leaseDaily),10,30);
  pdf.save("Yango_Investment_Report.pdf");
}
</script>

<!-- ================= HISTORY & PRO (ADD-ON) ================= -->

<div class="card hidden" id="history">
  <h3 data-i18n="history_title"></h3>
  <div id="historyList" class="result"></div>
</div>

<div class="card">
  <b data-i18n="pro_badge"></b>
</div>

<script>
/* ================= I18N ADD-ON ================= */
if(i18n.fr){
  i18n.fr.history_title = "Historique des simulations";
  i18n.fr.pro_badge = "Version PRO – Analyse avancée, multi-devises et export activés";
}
if(i18n.en){
  i18n.en.history_title = "Simulation history";
  i18n.en.pro_badge = "PRO version – Advanced analytics, multi-currency & export enabled";
}

/* ================= HISTORY LOGIC ================= */
function saveHistory(type, payload){
  const history = JSON.parse(localStorage.getItem("yango_history") || "[]");
  history.unshift({
    type,
    currency,
    lang,
    date: new Date().toLocaleString(),
    data: payload
  });
  localStorage.setItem("yango_history", JSON.stringify(history.slice(0, 10)));
  renderHistory();
}

function renderHistory(){
  const history = JSON.parse(localStorage.getItem("yango_history") || "[]");
  if(!history.length){
    historyList.innerHTML = "—";
    return;
  }
  historyList.innerHTML = history.map(h => `
    <div style="margin-bottom:10px">
      <b>${h.type}</b> – ${h.date}<br>
      <small>${JSON.stringify(h.data)}</small>
    </div>
  `).join("");
}
renderHistory();

/* ================= EXTEND EXISTING FUNCTIONS ================= */
const _simulateSalariat = simulateSalariat;
simulateSalariat = function(){
  _simulateSalariat();
  saveHistory("Salariat", {
    profit: fromUSD(salProfit),
    vehicles: s_cars.value
  });
};

const _simulateLeasing = simulateLeasing;
simulateLeasing = function(){
  _simulateLeasing();
  saveHistory("Leasing", {
    daily: fromUSD(leaseDaily),
    vehicles: l_cars.value
  });
};

/* ================= COMPARISON TABLE ================= */
const _show = show;
show = function(id){
  _show(id);
  if(id === "compare"){
    resCompare.innerHTML = `
<b>${i18n[lang].comparison}</b><br><br>

<b>Salariat :</b><br>
${fromUSD(salProfit)} / mois<br>
ROI ≈ ${Math.round((s_buy.value * s_cars.value) / salProfit)} mois<br><br>

<b>Leasing :</b><br>
${fromUSD(leaseDaily)} / jour<br>
ROI ≈ ${Math.round(l_buy.value / leaseDaily)} jours
`;
};
</script>
</body>
</html>
