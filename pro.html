<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Yango Business Simulator – PRO</title>

<style>
/* ================= RESET & BASE ================= */
*{box-sizing:border-box}
body{
  margin:0;
  font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Arial,sans-serif;
  background:#f5f6f8;
  color:#111;
}

/* ================= LAYOUT ================= */
.wrapper{
  max-width:960px;
  margin:auto;
  padding:20px;
}
.card{
  background:#ffffff;
  border-radius:16px;
  padding:24px;
  margin-bottom:28px;
}
.hidden{display:none}

/* ================= TYPO ================= */
h1{margin-top:0;font-size:26px}
h2{margin-top:0;font-size:22px}
h3{margin-top:0;font-size:18px}
p{line-height:1.6}

/* ================= NOTICE ================= */
.notice{
  background:#eef4ff;
  border-left:6px solid #2563eb;
  padding:18px;
  border-radius:14px;
  font-size:14px;
}

/* ================= FORM ================= */
label{
  font-weight:600;
  display:block;
  margin-top:18px;
}
.desc{
  font-size:13px;
  color:#666;
  margin:6px 0 8px;
}
input,select{
  width:100%;
  padding:14px;
  border-radius:12px;
  border:1px solid #ddd;
  font-size:15px;
}

/* ================= BUTTONS ================= */
button{
  width:100%;
  padding:16px;
  border:none;
  border-radius:14px;
  background:#FFD400;
  font-size:16px;
  font-weight:700;
  cursor:pointer;
  margin-top:22px;
}
button.secondary{
  background:#eee;
}

/* ================= NAV ================= */
.nav{
  display:grid;
  grid-template-columns:repeat(2,1fr);
  gap:12px;
  margin-top:18px;
}
.nav button.active{
  border-bottom:4px solid #FFD400;
}

/* ================= DASH ================= */
.stats{
  display:grid;
  grid-template-columns:repeat(2,1fr);
  gap:16px;
}
.stat{
  background:#f9fafb;
  border-radius:14px;
  padding:16px;
  text-align:center;
}
.stat b{
  font-size:22px;
  display:block;
  margin-top:6px;
}

/* ================= FOOTER ================= */
.footer{
  text-align:center;
  font-size:13px;
  color:#666;
  margin:50px 0 20px;
}

/* ================= MOBILE ================= */
@media(max-width:600px){
  .nav{grid-template-columns:1fr}
  .stats{grid-template-columns:1fr}
}
</style>
</head>

<body>

<div class="wrapper">

<!-- ================= IMPORTANT NOTICE ================= -->
<div class="card notice">
<strong>Important :</strong><br>
Toutes les estimations de rentabilité sont basées sur le service <strong>Yango ECO</strong>,
le plus accessible et le moins cher de la plateforme.
</div>

<!-- ================= LANGUAGE & CURRENCY ================= -->
<div class="card">
<h3>Préférences</h3>

<label>Langue</label>
<div class="desc">Choisissez la langue d’affichage de l’outil.</div>
<select id="languageSelect">
  <option value="fr">Français</option>
  <option value="en">English</option>
  <option value="es">Español</option>
  <option value="pt">Português</option>
  <option value="ru">Русский</option>
  <option value="ar">العربية</option>
  <option value="hi">हिन्दी</option>
  <option value="zh">中文</option>
</select>

<label>Devise</label>
<div class="desc">Les calculs sont faits en FCFA et convertis automatiquement.</div>
<select id="currencySelect">
  <option value="FCFA">FCFA</option>
  <option value="USD">USD</option>
  <option value="EUR">EUR</option>
  <option value="GHS">GHS</option>
  <option value="NGN">NGN</option>
  <option value="AED">AED</option>
  <option value="INR">INR</option>
  <option value="CNY">CNY</option>
  <option value="RUB">RUB</option>
</select>
</div>

<!-- ================= ACCESS PRO ================= -->
<div class="card" id="loginCard">
<h2>Accès professionnel</h2>
<p>Entrez votre code investisseur personnel pour accéder à l’outil.</p>

<label>Code PRO</label>
<div class="desc">Code reçu après paiement Mobile Money.</div>
<input id="codeInput" placeholder="Ex : JOSUE-MOMO-ALAIN">

<button onclick="unlock()">Débloquer l’accès</button>
</div>

<!-- ================= DASHBOARD ================= -->
<div class="card hidden" id="dashboard">
<h2>Tableau de bord investisseur</h2>

<div class="stats">
  <div class="stat">
    Simulations utilisées
    <b id="usedCount">0</b>
  </div>
  <div class="stat">
    Simulations restantes
    <b id="remainingCount">0</b>
  </div>
</div>

<div class="nav">
  <button id="btnSalariat" class="active" onclick="showSection('salariat')">
    Salariat
  </button>
  <button id="btnLeasing" onclick="showSection('leasing')">
    Leasing
  </button>
  <button onclick="showSection('compare')">Comparaison</button>
  <button onclick="showSection('history')">Historique</button>
</div>
</div>

<!-- ================= PLACEHOLDERS (PARTIE 2) ================= -->
<!-- ================= SALARIAT ================= -->
<div class="card hidden" id="salariat">
<h2>Simulation – Modèle Salariat</h2>

<p class="desc">
Ce modèle suppose que le partenaire reste propriétaire du véhicule
et rémunère le chauffeur par un salaire fixe et des primes.
</p>

<label>Nombre de véhicules</label>
<div class="desc">Valeur par défaut : 1 véhicule</div>
<input id="s_qty" type="number" value="1" min="1">

<label>Prix d’achat du véhicule (unité)</label>
<div class="desc">Valeur par défaut basée sur un véhicule standard</div>
<input id="s_buy" type="number" value="3000000">

<label>Revenu mensuel moyen par véhicule</label>
<div class="desc">Moyenne observée sur le service ECO</div>
<input id="s_rev" type="number" value="800000">

<hr>

<h3>Charges mensuelles</h3>

<label>Salaire chauffeur</label>
<input id="s_salary" type="number" value="80000">

<label>Primes / bonus</label>
<input id="s_bonus" type="number" value="30000">

<label>Carburant</label>
<input id="s_fuel" type="number" value="280000">

<label>Entretien & usure</label>
<input id="s_maint" type="number" value="50000">

<label>Divers / imprévus</label>
<input id="s_misc" type="number" value="30000">

<button onclick="calculateSalariat()">Calculer la rentabilité</button>

<div class="result hidden" id="salResult"></div>
</div>

<!-- ================= LEASING ================= -->
<div class="card hidden" id="leasing">
<h2>Simulation – Modèle Leasing</h2>

<p class="desc">
Dans ce modèle, le véhicule est confié au chauffeur contre un paiement régulier,
le carburant et l’entretien étant à sa charge.
</p>

<label>Nombre de véhicules</label>
<input id="l_qty" type="number" value="1" min="1">

<label>Prix d’achat du véhicule (unité)</label>
<input id="l_buy" type="number" value="3000000">

<label>Prix de revente au chauffeur (unité)</label>
<input id="l_sell" type="number" value="4500000">

<label>Durée du contrat (en mois)</label>
<input id="l_months" type="number" value="24">

<label>Nombre de jours travaillés par mois</label>
<input id="l_days" type="number" value="26">

<button onclick="calculateLeasing()">Calculer la rentabilité</button>

<div class="result hidden" id="leaseResult"></div>
</div>

<!-- ================= COMPARAISON ================= -->
<div class="card hidden" id="compare">
<h2>Comparaison Salariat vs Leasing</h2>
<div class="result" id="compareResult">
Veuillez effectuer une simulation Salariat et Leasing pour afficher la comparaison.
</div>
</div>

<!-- ================= HISTORIQUE ================= -->
<div class="card hidden" id="history">
<h2>Historique des simulations</h2>
<div id="historyList"></div>
</div>

<script>
function getStore(){
  return JSON.parse(localStorage.getItem(currentCode) || '{"used":0,"history":[]}');
}

function saveSimulation(type,data){
  const store = getStore();
  store.used += 1;
  store.history.push({
    type,
    date: new Date().toLocaleString(),
    data
  });
  localStorage.setItem(currentCode, JSON.stringify(store));

  usedCount.innerText = store.used;
  remainingCount.innerText = PRO_CODES[currentCode].max - store.used;
}

function calculateSalariat(){
  const qty = +s_qty.value;
  const charges =
    +s_salary.value +
    +s_bonus.value +
    +s_fuel.value +
    +s_maint.value +
    +s_misc.value;

  const netPerVehicle = +s_rev.value - charges;
  const totalNet = netPerVehicle * qty;
  const roi = (+s_buy.value / netPerVehicle).toFixed(1);

  salResult.innerHTML = `
    <strong>Résultats – Salariat</strong><br><br>
    Résultat net par véhicule : ${netPerVehicle.toLocaleString()} FCFA<br>
    Résultat net total (${qty} véhicules) : ${totalNet.toLocaleString()} FCFA<br>
    ROI estimé : ${roi} mois<br><br>
    <strong>Analyse :</strong>
    <ul>
      <li>Retour sur investissement rapide</li>
      <li>Génération de cash élevée</li>
      <li>Nécessite une gestion rigoureuse</li>
    </ul>
  `;
  salResult.classList.remove("hidden");

  saveSimulation("Salariat",{roi,netPerVehicle});
}

function calculateLeasing(){
  const qty = +l_qty.value;
  const marginPerVehicle = +l_sell.value - +l_buy.value;
  const monthlyPayment = +l_sell.value / +l_months.value;
  const dailyPayment = monthlyPayment / +l_days.value;
  const roi = (+l_buy.value / monthlyPayment).toFixed(1);

  leaseResult.innerHTML = `
    <strong>Résultats – Leasing</strong><br><br>
    Marge par véhicule : ${marginPerVehicle.toLocaleString()} FCFA<br>
    Paiement mensuel chauffeur : ${monthlyPayment.toFixed(0)} FCFA<br>
    Paiement journalier : ${dailyPayment.toFixed(0)} FCFA<br>
    ROI estimé : ${roi} mois<br><br>
    <strong>Analyse :</strong>
    <ul>
      <li>Gestion simplifiée</li>
      <li>Revenus stables</li>
      <li>Risque opérationnel réduit</li>
    </ul>
  `;
  leaseResult.classList.remove("hidden");

  saveSimulation("Leasing",{roi,marginPerVehicle});
}

function showComparison(){
  const store = getStore();
  const sal = store.history.filter(h=>h.type==="Salariat").slice(-1)[0];
  const lea = store.history.filter(h=>h.type==="Leasing").slice(-1)[0];

  if(!sal || !lea){
    compareResult.innerHTML = "Veuillez effectuer les deux simulations.";
    return;
  }

  let reco = "";
  if(sal.data.roi < lea.data.roi){
    reco = "Le modèle Salariat permet une récupération du capital plus rapide.";
  }else{
    reco = "Le modèle Leasing offre plus de stabilité et moins de gestion.";
  }

  compareResult.innerHTML = `
    <strong>Comparaison</strong><br><br>
    ROI Salariat : ${sal.data.roi} mois<br>
    ROI Leasing : ${lea.data.roi} mois<br><br>
    <strong>Recommandation :</strong> ${reco}
  `;
}

function loadHistory(){
  const store = getStore();
  if(store.history.length === 0){
    historyList.innerHTML = "Aucune simulation enregistrée.";
    return;
  }

  historyList.innerHTML = store.history.map(h=>`
    <div style="margin-bottom:12px;">
      <strong>${h.type}</strong><br>
      Date : ${h.date}<br>
      ROI : ${h.data.roi} mois
    </div>
  `).join("");
}

/* Patch navigation */
const oldShow = showSection;
showSection = function(id){
  oldShow(id);
  if(id==="compare") showComparison();
  if(id==="history") loadHistory();
};
</script>


<!-- ================= FOOTER ================= -->
<div class="footer">
© 2026 – Josué Cédric Komlan Akakpovi<br>
WhatsApp : +229 01 53 63 63 63 · Email : komlan2303@gmail.com
</div>

</div>

<!-- ================= SCRIPT BASE ================= -->
<script>
/* ===== CONFIG CODES PRO ===== */
const PRO_CODES = {
  "JOSUE-MOMO-DEMO": {
    owner:"Demo",
    type:"count",      // count | time
    max:50,            // nombre de simulations
    days:0             // durée si type = time
  }
};

let currentCode = null;

/* ===== ACCESS ===== */
function unlock(){
  const code = codeInput.value.trim();
  if(!PRO_CODES[code]){
    alert("Code invalide ou expiré.");
    return;
  }
  currentCode = code;
  const store = JSON.parse(localStorage.getItem(code) || "{}");
  const used = store.used || 0;

  usedCount.innerText = used;
  remainingCount.innerText = PRO_CODES[code].max - used;

  loginCard.classList.add("hidden");
  dashboard.classList.remove("hidden");
  showSection("salariat");
}

/* ===== NAV ===== */
function showSection(id){
  ["salariat","leasing","compare","history"].forEach(s=>{
    document.getElementById(s).classList.add("hidden");
  });
  document.getElementById(id).classList.remove("hidden");

  document.getElementById("btnSalariat").classList.remove("active");
  document.getElementById("btnLeasing").classList.remove("active");
  if(id==="salariat") btnSalariat.classList.add("active");
  if(id==="leasing") btnLeasing.classList.add("active");
}
</script>
<!-- ================= PARTIE 3 : LANGUES, DEVISES, PDF, CODES TEMPO ================= -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script>
/* ================= LANGUES ================= */
const i18n = {
  fr:{
    salariat:"Simulation – Modèle Salariat",
    leasing:"Simulation – Modèle Leasing",
    compare:"Comparaison Salariat vs Leasing",
    history:"Historique des simulations",
    calc:"Calculer la rentabilité",
    analysis:"Analyse",
    recommendation:"Recommandation",
    important:"Estimations basées sur le service Yango ECO"
  },
  en:{
    salariat:"Salary model simulation",
    leasing:"Leasing model simulation",
    compare:"Salary vs Leasing comparison",
    history:"Simulation history",
    calc:"Run calculation",
    analysis:"Analysis",
    recommendation:"Recommendation",
    important:"Estimates based on Yango ECO service"
  },
  es:{
    salariat:"Simulación – Modelo salarial",
    leasing:"Simulación – Modelo leasing",
    compare:"Comparación salarial vs leasing",
    history:"Historial de simulaciones",
    calc:"Calcular rentabilidad",
    analysis:"Análisis",
    recommendation:"Recomendación",
    important:"Estimaciones basadas en el servicio Yango ECO"
  },
  pt:{
    salariat:"Simulação – Modelo salarial",
    leasing:"Simulação – Modelo leasing",
    compare:"Comparação salarial vs leasing",
    history:"Histórico de simulações",
    calc:"Calcular rentabilidade",
    analysis:"Análise",
    recommendation:"Recomendação",
    important:"Estimativas baseadas no serviço Yango ECO"
  },
  ru:{ salariat:"Модель с зарплатой" },
  ar:{ salariat:"نموذج الراتب" },
  hi:{ salariat:"वेतन मॉडल" },
  zh:{ salariat:"工资模式" }
};

let currentLang = "fr";
languageSelect.onchange = () => {
  currentLang = languageSelect.value;
  document.querySelector("#salariat h2").innerText = i18n[currentLang].salariat;
  document.querySelector("#leasing h2").innerText = i18n[currentLang].leasing;
  document.querySelector("#compare h2").innerText = i18n[currentLang].compare;
  document.querySelector("#history h2").innerText = i18n[currentLang].history;
};

/* ================= DEVISES ================= */
const currencyRates = {
  FCFA:1,
  USD:600,
  EUR:655,
  GHS:50,
  NGN:1.3,
  AED:165,
  INR:7.2,
  CNY:85,
  RUB:6
};

function convertAmount(amount){
  const rate = currencyRates[currencySelect.value];
  return (amount / rate).toFixed(2) + " " + currencySelect.value;
}

/* ================= CODES À DURÉE ================= */
/*
Exemple de code temporel :
"JOSUE-TIME-30": {
  owner:"Client X",
  type:"time",
  days:30,
  start:null
}
*/

function checkTimeCode(code){
  const cfg = PRO_CODES[code];
  if(cfg.type !== "time") return true;

  let store = JSON.parse(localStorage.getItem(code) || "{}");
  if(!store.start){
    store.start = new Date().toISOString();
    localStorage.setItem(code, JSON.stringify(store));
    return true;
  }
  const start = new Date(store.start);
  const now = new Date();
  const diff = (now - start) / (1000*60*60*24);
  return diff <= cfg.days;
}

/* Patch unlock */
const oldUnlock = unlock;
unlock = function(){
  const code = codeInput.value.trim();
  if(!PRO_CODES[code]) return alert("Code invalide");
  if(PRO_CODES[code].type==="time" && !checkTimeCode(code)){
    return alert("Ce code a expiré.");
  }
  oldUnlock();
};

/* ================= PDF PRO ================= */
const { jsPDF } = window.jspdf;

function generatePDF(type){
  const doc = new jsPDF();
  doc.setFontSize(14);
  doc.text("Yango Business Simulator – PRO",10,15);
  doc.setFontSize(11);
  doc.text(i18n[currentLang].important,10,25);
  doc.text("Date : " + new Date().toLocaleString(),10,35);

  doc.setFontSize(12);
  doc.text("Type de simulation : " + type,10,50);

  if(type==="Salariat"){
    doc.text("Analyse basée sur un modèle de rémunération salariale.",10,65);
    doc.text("Avantages : retour rapide, cash-flow élevé.",10,75);
    doc.text("Risques : gestion du chauffeur et du carburant.",10,85);
  }

  if(type==="Leasing"){
    doc.text("Analyse basée sur un modèle de leasing.",10,65);
    doc.text("Avantages : gestion simplifiée, revenus stables.",10,75);
    doc.text("Risques : retards de paiement.",10,85);
  }

  if(type==="Comparaison"){
    doc.text("Comparaison des deux modèles.",10,65);
    doc.text("Recommandation stratégique basée sur le ROI.",10,75);
  }

  doc.save("Yango_"+type+"_PRO.pdf");
}

/* Ajout boutons PDF dynamiques */
document.querySelectorAll("#salariat button")[1]?.addEventListener("click",()=>generatePDF("Salariat"));
document.querySelectorAll("#leasing button")[1]?.addEventListener("click",()=>generatePDF("Leasing"));
document.querySelector("#compare button")?.addEventListener("click",()=>generatePDF("Comparaison"));

</script>

</body>
</html>
